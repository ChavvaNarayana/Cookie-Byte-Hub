{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chavv\\\\Documents\\\\GitHub\\\\TypeScript\\\\Medium\\\\Cookie-Byte-Hub\\\\src\\\\Context\\\\AuthContext.jsx\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { createContext } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { useContext } from \"react\";\nimport ToastContext from \"./ToastContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport const AuthContextProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const {\n    toast\n  } = useContext(ToastContext);\n  const isLoggedIn = async () => {\n    try {\n      const headers = {\n        Authorization: `Bearer ${sessionStorage.getItem(\"token\")}`\n      };\n      const res = await axios.post(\"https://chavva-blogapp-server.onrender.com/user/isLoggedIn\", null, {\n        headers\n      });\n      setUser(\"user\");\n      // console.log(res);\n      if (location.pathname === \"/\" || location.pathname === \"/signup\") {\n        navigate(\"/home\", {\n          replace: true\n        });\n      } else {\n        navigate(location.pathname);\n      }\n    } catch (error) {\n      navigate(\"/\");\n      toast.error(\"Please Login First\");\n      // alert(\"Please Login First\")\n    }\n  };\n\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [user, setUser] = useState(null);\n  const login = async userData => {\n    try {\n      //console.log(userData);\n      const res = await axios.post(\"https://chavva-blogapp-server.onrender.com/user/login\", userData);\n      //console.log(res.data);\n      setUser(res.data.user);\n      sessionStorage.setItem(\"token\", res.data.token);\n      navigate(\"/home\", {\n        replace: true\n      });\n    } catch (error) {\n      toast.error(error.response.data);\n    }\n  };\n  const signup = async userData => {\n    //console.log(userData);\n    try {\n      const res = await axios.post(\"https://chavva-blogapp-server.onrender.com/user/signup\", userData);\n      // toast.success(res.data)\n      //console.log(res.data);\n      navigate(\"/\");\n      toast.success(\"User Registered Successfully\");\n    } catch (error) {\n      toast.error(error.response.data);\n      //console.log(error.message);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      setUser,\n      login,\n      signup\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthContextProvider, \"52D+eD1pOf4oYS/ndAy0EVepbE0=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = AuthContextProvider;\nexport default AuthContext;\nvar _c;\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"names":["useState","useEffect","createContext","useLocation","useNavigate","axios","useContext","ToastContext","AuthContext","AuthContextProvider","children","toast","isLoggedIn","headers","Authorization","sessionStorage","getItem","res","post","setUser","location","pathname","navigate","replace","error","user","login","userData","data","setItem","token","response","signup","success"],"sources":["C:/Users/chavv/Documents/GitHub/TypeScript/Medium/Cookie-Byte-Hub/src/Context/AuthContext.jsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { createContext } from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { useContext } from \"react\";\r\nimport ToastContext from \"./ToastContext\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const AuthContextProvider = ({ children }) => {\r\n  const { toast } = useContext(ToastContext);\r\n\r\n  \r\n\r\n  const isLoggedIn = async () => {\r\n    try {\r\n      const headers = {\r\n        Authorization: `Bearer ${sessionStorage.getItem(\"token\")}`,\r\n      };\r\n      const res = await axios.post(\r\n        \"https://chavva-blogapp-server.onrender.com/user/isLoggedIn\",\r\n        null,\r\n        { headers }\r\n      );\r\n      setUser(\"user\");\r\n      // console.log(res);\r\n      if (location.pathname === \"/\" || location.pathname === \"/signup\") {\r\n        navigate(\"/home\", { replace: true });\r\n      } else {\r\n        navigate(location.pathname);\r\n      }\r\n    } catch (error) {\r\n      navigate(\"/\");\r\n      toast.error(\"Please Login First\");\r\n      // alert(\"Please Login First\")\r\n    }\r\n  };\r\n\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  const [user, setUser] = useState(null);\r\n\r\n  const login = async (userData) => {\r\n    try {\r\n      //console.log(userData);\r\n      const res = await axios.post(\r\n        \"https://chavva-blogapp-server.onrender.com/user/login\",\r\n        userData\r\n      );\r\n      //console.log(res.data);\r\n      setUser(res.data.user);\r\n      sessionStorage.setItem(\"token\", res.data.token);\r\n      navigate(\"/home\", { replace: true });\r\n    } catch (error) {\r\n      toast.error(error.response.data);\r\n    }\r\n  };\r\n\r\n  const signup = async (userData) => {\r\n    //console.log(userData);\r\n    try {\r\n      const res = await axios.post(\r\n        \"https://chavva-blogapp-server.onrender.com/user/signup\",\r\n        userData\r\n      );\r\n      // toast.success(res.data)\r\n      //console.log(res.data);\r\n      navigate(\"/\");\r\n      toast.success(\"User Registered Successfully\");\r\n    } catch (error) {\r\n      toast.error(error.response.data);\r\n      //console.log(error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, setUser, login, signup }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthContext;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}